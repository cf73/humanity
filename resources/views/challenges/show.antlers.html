<div id="breadcrumb" class="w-full h-16 bg-white fixed top-24 z-50 box-border">
    <div class="container mx-auto h-full flex flex-row items-center justify-between">
        <h4>Our Challenges / {{title}}</h4>
        <div id="filterButton" class="cursor-pointer z-50">
            <h4><i class="las la-filter"></i>Filter</h4>
        </div>
    </div>
</div>

<div id="filtersheet" class="w-full h-0 top-40 bg-white backdrop-blur fixed left-0 z-50 overflow-x-hidden">
    <div id="filters" class="container mx-auto flex flex-col relative h-[calc(100vh-200px)] justify-center">
        <form action="/results/{{url}}" method="get" class="pt-24">
                {{taxonomy:collection_type}}
                    <label class="textMainSans leading-loose labelcontainer">
                        <input class="rounded"
                            type="checkbox"
                            name="collectiontype[]"
                            value="{{ slug }}"
                            {{ (get:collectiontype | contains(slug)) ?= 'checked' }}>
                        {{ title }}<br>
                        <span class="checkmark"></span>
                    </label>
                    <style>
                        /* Customize the label (the labelcontainer) */
                        .labelcontainer {
                            position: relative;
                            padding-left: 35px;
                            margin-bottom: 12px;
                            cursor: pointer;
                            user-select: none;
                        }
                
                        /* Hide the browser's default checkbox */
                        .labelcontainer input {
                            position: absolute;
                            opacity: 0;
                            cursor: pointer;
                            height: 0;
                            width: 0;
                        }
                
                        /* Create a custom checkbox */
                        .checkmark {
                            position: absolute;
                            top: 0;
                            left: 0;
                            height: 1em;
                            width: 1em;
                            background-color: #eee;
                            border-radius: 50%; /* Make it circular */
                        }
                
                        /* On mouse-over, add a grey background color */
                        .labelcontainer:hover input ~ .checkmark {
                            background-color: #ccc;
                        }
                
                        /* When the checkbox is checked, add a blue background */
                        .labelcontainer input:checked ~ .checkmark {
                            background-color: #2196F3;
                        }
                
                        /* Create the checkmark/indicator (hidden when not checked) */
                        .checkmark:after {
                            content: "";
                            position: absolute;
                            display: none;
                            /* Style the checkmark (e.g., a white dot) */
                        }
                
                        /* Show the checkmark when checked */
                        .labelcontainer input:checked ~ .checkmark:after {
                            display: block;
                            /* Style the checkmark (e.g., a white dot) */
                        }
                        </style>
                {{/taxonomy:collection_type}}
                <div id="filterButtons" class="flex flex-row space-x-4 w-full absolute bottom-0 z-50 bg-red">
                    <button type="submit" class="btn-primary">Apply filter</button>
                    <button id="closeFiltersButton" type="button" class="btn-secondary">Cancel</button>
                </div>
        </form>
    </div>
</div>

{{partial:globals/smoothWrapStart}}


<div id="hero-area" class="top-32">
    <img src="{{main_image:image}}" alt="{{title}}" width="100%" height="auto" class="">
    <div id="initialQuote" class="flex flex-col items-center justify-center display z-50">
        {{ collection:quotations challenges:contains="{{slug}}" sort="random" limit="1" }}
            <h2 class="mb-4 w-2/3 mx-auto text-center">{{quotation}}</h2>
            <div class="textMeta text-white w-2/3 mx-auto text-center">{{attribution}}</div>
        {{/collection:quotations}}
        <div class="text-bold">{{collection:partner_initiatives challenges:contains="{{slug}}" as="entries"}} {{entries | count}} {{/collection:partner_initiatives}} Initiatives</div>
    </div>
    <!-- <video id="earth" src="{{intro_movie}}" autoplay muted loop style="
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 66vh;
    object-fit: cover;2
    z-index: 0;"></video> -->
    <!-- <div id="dimmer" class="opacity-0 h-[100vh] bg-cetaceanBlue/80 absolute z-0 bottom-0 w-full"></div> -->
</div>



<div class="flex flex-col items-center justify-center w-full text-center mx-auto z-50">
    <div id="introText" class="opacity-0 text-atomicTangerine prose prose-sky prose-2xl ">{{intro_text}}</div>
</div>

<!-- <div id="hiddenScrollController1" class="h-[200vh] relative z-50 bg-red-300 w-40 -top-[30vh]"></div> -->

<div id="filter" class="hidden bg-white/40 hover:bg-white/90 backdrop-blur-lg cursor-pointer rounded-lg w-fit px-4 absolute z-10 left-8 top-24 py-2"><span class="textMeta">Filter</span></div>

<!-- Image and quote -->
<!-- <div class="px-32 grid grid-cols-2 gap-16 h-[80vh] w-full bg-algae">
    <div class=" bg-no-repeat bg-center bg-contain h-full w-full" style="background-image: url('{{ collection:photography_contributions challenges:contains='{slug}' sort='random' limit='1' }}{{image}}{{ /collection:photography_contributions }}');"></div>
    <div class=" flex flex-col justify-center">
        {{ collection:quotations challenges:contains="{{slug}}" sort="random" limit="1" }}
            <h5 class="mb-4">{{quotation}}</h5>
            <div class="textMeta">{{attribution}}</div>
        {{/collection:quotations}}
    </div>
</div> -->



<hr>
<h3>Suggested entry points</h3>
<hr>
<hr>
<h3>Recently added</h3>
<hr>
<hr>
<h3>Trending now</h3>
<hr>
<hr>
<h3>See more</h3>

<div id="challengeContent" class="container mx-auto grid grid-cols-5 gap-16 mt-16 mb-32 px-8">
    <!-- <style>
        /* Hide inactive checkboxes */
        input[type="checkbox"]:not(:checked) {
            display: none;
        }
    </style> -->
    <div class="col-start-1 col-span-5">
        {{ collection from="*" not_from="pages" as="results"
            taxonomy:challenges="{{slug}}"
            :taxonomy:collection_type="get:collectiontype"
            
             }}
            {{ if no_results }}
                <div class="p-8 rounded-lg bg-gray-100 text-center">
                    Sorry, no results.
                </div>
            {{ else }}
                <div class="grid grid-cols-2 gap-32">
                    {{ results | shuffle }}
                        {{ partial:cards/card }}
                    {{ /results }}
                </div>
            {{ /if }}
        {{ /collection }}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="/js/challengeShow.js"></script>

{{partial:globals/smoothWrapEnd}}