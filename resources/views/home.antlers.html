{{partial:globals/smoothWrapStart}}
<div id="invisibleScrollerTarget"></div>

<section data-speed=".9" id="hero" class="min-h-screen pt-24 pb-12 relative flex flex-col justify-center">
    <div class="background absolute top-0 left-0 w-full h-full bg-softblack z-0"></div>
    <video id="clouds" autoplay muted loop class="absolute top-0 left-0 z-0 w-full h-full object-cover opacity-80">
        <source src="/assets/clouds3.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div id="itstime" class="flex flex-col justify-center h-full w-full pt-[10vh] items-center text-center relative z-30 pr-16 space-y-8">
        <div>
            <h1 id="counting" class="text-white">2024 and counting...</h1>
            <h1 class="text-white">Time to rescue our humanity.</h1>
        </div>
        <h2 class="w-2/3 text-white leading-normal">
            {{welcome_message}}
        </h2>
        <button id="heroButton" class="btn-primary">{{lead_button_text}}</button>
        </div>
    <!-- <div data-speed=".6" style="background-image: url('{{hero_images | random}}');" class="h-full w-full bg-center bg-contain bg-no-repeat"></div> -->
</section>

<section id="secondary" class="grid grid-cols-2 gap-16 h-[calc(100vh-96px)] relative z-10">
    <div class="flex flex-col justify-center h-full">
        <div class="bg-blueblast prose prose-sky xl:prose-xl leading-snug xl:leading-snug lg:p-16">
            {{intro_to_sites_content:summary}}
        </div>
        <div style="background-image: url({{intro_to_sites_content_image}});" class="bg-center bg-cover bg-repeat-no-repeat bg-red-300 h-full"></div>
        </div>
    <div data-speed="1.2" class="h-full w-full flex flex-col justify-center lg:pr-16">
        <div class="accordion container mx-auto relative z-40">
            <style>
                .accordion-item.active .accordion-icon {
                transform: rotate(90deg);
                }
            </style>
            {{intro_to_sites_content:accordion}}
            <div class="accordion-item py-4 border-b border-textBlue">
                <div class="accordion-header cursor-pointer flex items-center justify-between xl:py-2 font-inter font-medium duration-200 ease-out">
                    <h3>{{item_title}}</h3>
                    <span class="accordion-icon inline-block rotate-0 duration-200 ease-out"><i class="fa-solid fa-chevron-down accordion-icon"></i></span>
                </div>
                <div style="height: 0;" class="accordion-content overflow-hidden duration-200 ease-out">
                    <div class="prose prose-sky leading-snug py-2">
                        <div class="mb-4">{{item_content}}</div>
                        <a href="{{url}}"><button class="btn-tirtiary">Explore</button></a>
                    </div>
                </div>
            </div>
            {{/intro_to_sites_content:accordion}}
        </div>
    </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
document.getElementById("heroButton").onclick = () => {
    gsap.to(window, { duration: 2, scrollTo: { y: "#challengesIntro", offsetY:24 } });
};
});
</script>

<section id="featuredCommencementSpeeches">
    <div data-speed="1.2" class="pt-16 pb-24 mb-20 space-y-8 flex flex-col  mt-0">
        <div class="swiper featuredCommencementSpeeches container">
                <div class="flex flex-row items-center justify-between w-full mb-8">
                    <h2>{{featured_content_heading}}</h2>
                    <div class="flex flex-row justify-end space-x-2 relative -left-1 mt-[40px] mb-8 mr-8 swiper-pagination">
                        <div class="image-swiper-button-prev"></div>
                        <div class="image-swiper-button-next"></div>
                    </div>
                </div>
    
            <div class="swiper-wrapper">
                {{featured_content | shuffle}}
                    <div class="swiper-slide" style="height: auto !important;">
                        {{partial:cards/card headingColor=""}}
                    </div>
                {{/featured_content}}
            </div>
        </div>
    </div>
</section>

<section class="relative">
    <div class="background absolute top-0 right-0 w-2/3 h-full bg-softblack z-0"></div>
    <div class="container mx-auto h-screen grid grid-cols-2 relative z-30">
        <div data-speed=".8" style="background-image: url('{{closing_photo}}');" class="h-full w-full bg-center bg-contain bg-no-repeat relative z-30"></div>
        <div class="flex flex-col justify-center h-full pl-8 xl:pl-16 space-y-12">
            <div class="prose prose-sky prose-invert xl:prose-xl leading-snug xl:leading-snug">
                {{closing_text}}
            </div>
          </div>
    </div>
</section>

<section id="challengesIntro" class="h-full w-full pt-32 space-y-16">
    <div data-speed=".9" class="grid grid-cols-3 gap-16 text-center w-full container mx-auto h-screen">
        {{taxonomy:challenges}}
            <div class="flex flex-col justify-center items-center text-7xl">{{title}}</div>
        {{/taxonomy:challenges}}
    </div>
    
    {{taxonomy:challenges slug:contains="war"}}
    <div style="background-image: url({{main_image:image}});" class="w-full h-screen flex flex-col justify-end bg-no-repeat bg-cover bg-left">
    </div>
    <div data-speed="1.2" class="container mx-auto grid grid-cols-12 z-10 relative -top-[20vh]">
        <div class="col-span-12 mb-24">
            {{featured_content limit="1"}}
                {{partial:cards/featuredCard}}
            {{/featured_content}}
        </div>
        <div class="featuredSwiper col-span-12 lg:col-span-6 lg:row-start-2 lg:col-start-6 w-full">
            <div class="flex flex-row justify-between mb-8 items-center">
                <div class="textMeta">Featured</div>
                <div class="flex flex-row justify-end space-x-2 relative">
                    <div class="image-swiper-button-prev"></div>
                    <div class="image-swiper-button-next"></div>
                </div>
            </div>
            <div class="swiper-wrapper">
                {{taxonomy:challenges slug:contains="war"}}
                    {{featured_content offset="1"}}
                        <div class="swiper-slide" style="height: auto !important;">
                            {{partial:cards/card}}
                        </div>
                    {{/featured_content}}
                    
                    <div class="swiper-slide flex flex-col justify-center border-l-[1px] border-earth" style="height: auto !important;">
                        <div class="">
                            
                            <div class="flex flex-col h-full pl-8 space-x-6 space-y-2 font-medium text-2xl tracking-wide text-softblack mx-auto flex-wrap justify-center items-baseline">
                                <div class="textMeta mb-4">Explore more...</div>
                                <h4>{{collection:articles challenges:contains="{{challengeslug}}" as="entries"}} {{entries | count}} {{/collection:articles}} Articles</h4>
                                <h4>{{collection:books challenges:contains="{{challengeslug}}" as="entries"}} {{entries | count}} {{/collection:books}} Books</h4>
                                <h4>{{collection:commencement_speeches challenges:contains="{{challengeslug}}" as="entries"}} {{entries | count}} {{/collection:commencement_speeches}} Commencement Speeches</h4>
                                <h4>{{collection:documentaries challenges:contains="{{challengeslug}}" as="entries"}} {{entries | count}} {{/collection:documentaries}} Documentaries</h4>
                                <h4>{{collection:photography_contributions challenges:contains="{{challengeslug}}" as="entries"}} {{entries | count}} {{/collection:photography_contributions}} Photography Contributions</h4>
                                <h4>{{collection:talks challenges:contains="{{challengeslug}}" as="entries"}} {{entries | count}} {{/collection:talks}} Talks</h4>
                            </div>
                            <a href="/challenges/{{slug}}" class="pl-12"><button class="btn-primary">Explore</button></a>
    
                        </div>
                    </div>
                    
                {{/taxonomy:challenges}}
            </div>
        </div>
        <div data-speed=".8" class="col-span-12 lg:col-span-5 flex flex-col lg:justify-center lg:pr-16 lg:pl-6 text-center items-center my-24 lg:my-0 lg:text-left lg:items-start">
            {{ collection:quotations challenges:contains="{{slug}}" sort="random" limit="1" }}
                <div class="text-5xl mb-4">{{quotation}}</div>
                <div class="textMeta">{{attribution}}</div>
            {{/collection:quotations}}
        </div>
    </div>
    <div class="flex flex-col items-center"><a href="/challenges/{{slug}}" class=""><button class="btn-primary">Explore all content on {{title}}</button></a></div>
    {{/taxonomy:challenges}}

    <div class="grid grid-cols-3 gap-16 text-center w-full container mx-auto h-screen">
        {{taxonomy:challenges}}
            <div class="flex flex-col justify-center items-center text-7xl">{{title}}</div>
        {{/taxonomy:challenges}}
    </div>

    {{taxonomy:challenges slug:contains="climate"}}
    <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
    </div>
    <div data-speed="1.2" class="col-span-12 lg:col-span-6 lg:row-start-2 lg:col-start-6 mb-24 z-10">
        {{featured_content limit="3"}}
            {{partial:cards/featuredCard}}
        {{/featured_content}}                    
    </div>
    {{/taxonomy:challenges}}

    {{taxonomy:challenges slug:contains="democracy"}}
    <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
    </div>
    <div data-speed="1.2" class="col-span-12 lg:col-span-6 lg:row-start-2 lg:col-start-6 mb-24 z-10">
        {{featured_content limit="3"}}
            {{partial:cards/featuredCard}}
        {{/featured_content}}                    
    </div>
    {{/taxonomy:challenges}}
    
</section>



<!-- <section class="py-48 space-y-8 relative z-10">
    <div data-speed=".9" class="font-thin text-7xl xl:text-8xl text-center leading-tight xl:px-36">
        "Don't look for hope.<br>Look for <span class="font-bold">action</span>."
    </div>
    <div data-speed=".9" class="textMeta mx-auto">
        &mdash; Greta Thunberg
    </div>
</section> -->

    <script src="/js/heroGSAP.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const accordionItems = document.querySelectorAll(".accordion-item");

            accordionItems.forEach((item) => {
            const header = item.querySelector(".accordion-header");
            const content = item.querySelector(".accordion-content");

            header.addEventListener("click", () => {

                // close other items
                accordionItems.forEach((otherItem) => {
                if (otherItem !== item && otherItem.classList.contains("active")) {
                    otherItem.classList.remove("active");
                    otherItem.querySelector(".accordion-content").style.height = 0;
                }
                });

                item.classList.toggle("active");

                if (item.classList.contains("active")) {
                content.style.height = `${content.scrollHeight}px`;
                } else {
                content.style.height = 0;
                }
            });
            });
        });        
    </script>

    <script>
        gsap.fromTo("#main-nav", 
        { y: -96 }, // Starting value
        { 
            y: 0, // Ending value
            scrollTrigger: {
            trigger: "#invisibleScrollerTarget",
            start: "top -96", // Adjust based on when you want the animation to start
            toggleActions: "play none none reverse", // Play animation on enter, reverse on leave
            paused: true, // Pauses the animation until the scroll happens
            },
            duration: 0.75,
            ease: "power2.inOut",
        }
        );
    </script>
{{partial:globals/smoothWrapEnd}}