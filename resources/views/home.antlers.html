{{partial:globals/smoothWrapStart}}
<div id="invisibleScrollerTarget"></div>

<section data-speed=".9" id="hero" class="min-h-screen pt-24 pb-12 relative flex flex-col justify-center">
    <div class="background absolute top-0 left-0 w-full h-full bg-softblack z-0"></div>
    <video id="clouds" autoplay muted loop class="absolute top-0 left-0 z-0 w-full h-full object-cover opacity-80">
        <source src="/assets/clouds3.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div id="itstime" class="flex flex-col justify-center h-full w-full pt-[10vh] items-center text-center relative z-30 pr-16 space-y-8">
        <div>
            <h1 id="counting" class="text-white">2024 and counting...</h1>
            <h1 class="text-white">Time to rescue our humanity.</h1>
        </div>
        <h2 class="w-2/3 text-white leading-normal">
            {{welcome_message}}
        </h2>
        <button id="heroButton" class="btn-primary">{{lead_button_text}}</button>
        </div>
    <!-- <div data-speed=".6" style="background-image: url('{{hero_images | random}}');" class="h-full w-full bg-center bg-contain bg-no-repeat"></div> -->
</section>

<section id="challengesIntro" class="pt-32 space-y-16">
    <div id="challengesMenu1" class="flex flex-col justify-center lg:text-5xl xl:text-7xl text-azure font-bold uppercase tracking-wider justify-between px-15 lg:px-48 py-[20vh] text-center h-[calc(100vh-62px)]">
        <div class="textMeta mx-auto text-blast">our priorities</div>
        <div id="active1" class="flex flex-col justify-center items-center text-center">Ending War</div>
        <div class="flex flex-col justify-center items-center text-center inactive1">Solving Climate Change</div>
        <div class="flex flex-col justify-center items-center text-center inactive1">Preserving Democracy</div>
    </div>

    {{partial:challengeIntro challengeslugpassed="war"}}

    <div id="challengesMenu1" data-speed=".5" class="flex flex-col justify-center lg:flex-row justify-between lg:gap-16 p-48 text-lg text-center container mx-auto h-[calc(100vh-62px)]">
        <div class="flex flex-col justify-center items-center text-center">Ending War</div>
        <div class="flex flex-col justify-center items-center text-center inactive1">Solving Climate Change</div>
        <div class="flex flex-col justify-center items-center text-center inactive1">Preserving Democracy</div>
    </div>

    {{partial:challengeIntro challengeslugpassed="climate"}}

    <div id="challengesMenu1" data-speed=".5" class="flex flex-col justify-center lg:flex-row justify-between lg:gap-16 p-48 text-lg text-center container mx-auto h-[calc(100vh-62px)]">
        <div class="flex flex-col justify-center items-center text-center">Ending War</div>
        <div class="flex flex-col justify-center items-center text-center inactive1">Solving Climate Change</div>
        <div class="flex flex-col justify-center items-center text-center inactive1">Preserving Democracy</div>
    </div>

    {{partial:challengeIntro challengeslugpassed="democracy"}}

</section>

<section id="secondary" class="grid grid-cols-2 gap-16 h-[calc(100vh-96px)] relative z-10">
    <div class="flex flex-col justify-center h-full">
        <div class="bg-blueblast prose prose-sky xl:prose-xl leading-snug xl:leading-snug lg:p-16">
            {{intro_to_sites_content:summary}}
        </div>
        <div style="background-image: url({{intro_to_sites_content_image}});" class="bg-center bg-cover bg-repeat-no-repeat bg-red-300 h-full"></div>
        </div>
    <div data-speed="1.2" class="h-full w-full flex flex-col justify-center lg:pr-16">
        <div class="accordion container mx-auto relative z-40">
            <style>
                .accordion-item.active .accordion-icon {
                transform: rotate(90deg);
                }
            </style>
            {{intro_to_sites_content:accordion}}
            <div class="accordion-item py-4 border-b border-textBlue">
                <div class="accordion-header cursor-pointer flex items-center justify-between xl:py-2 font-inter font-medium duration-200 ease-out">
                    <h3>{{item_title}}</h3>
                    <span class="accordion-icon inline-block rotate-0 duration-200 ease-out"><i class="fa-solid fa-chevron-down accordion-icon"></i></span>
                </div>
                <div style="height: 0;" class="accordion-content overflow-hidden duration-200 ease-out">
                    <div class="prose prose-sky leading-snug py-2">
                        <div class="mb-4">{{item_content}}</div>
                        <a href="{{url}}"><button class="btn-tirtiary">Explore</button></a>
                    </div>
                </div>
            </div>
            {{/intro_to_sites_content:accordion}}
        </div>
    </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
document.getElementById("heroButton").onclick = () => {
    gsap.to(window, { duration: 2, scrollTo: { y: "#challengesIntro", offsetY:24 } });
};
});
</script>



<section data-speed="0.8" class="relative">
    <div class="background absolute top-0 right-0 w-2/3 h-full bg-softblack z-0"></div>
    <div class="container mx-auto h-screen grid grid-cols-2 relative z-30">
        <div data-speed=".8" style="background-image: url('{{closing_photo}}');" class="h-full w-full bg-center bg-contain bg-no-repeat relative z-30"></div>
        <div class="flex flex-col justify-center h-full pl-8 xl:pl-16 space-y-12">
            <div class="prose prose-sky prose-invert xl:prose-xl leading-snug xl:leading-snug">
                {{closing_text}}
            </div>
          </div>
    </div>
</section>

<!-- <section class="py-48 space-y-8 relative z-10">
    <div data-speed=".9" class="font-thin text-7xl xl:text-8xl text-center leading-tight xl:px-36">
        "Don't look for hope.<br>Look for <span class="font-bold">action</span>."
    </div>
    <div data-speed=".9" class="textMeta mx-auto">
        &mdash; Greta Thunberg
    </div>
</section> -->

    <script src="/js/heroGSAP.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const accordionItems = document.querySelectorAll(".accordion-item");

            accordionItems.forEach((item) => {
            const header = item.querySelector(".accordion-header");
            const content = item.querySelector(".accordion-content");

            header.addEventListener("click", () => {

                // close other items
                accordionItems.forEach((otherItem) => {
                if (otherItem !== item && otherItem.classList.contains("active")) {
                    otherItem.classList.remove("active");
                    otherItem.querySelector(".accordion-content").style.height = 0;
                }
                });

                item.classList.toggle("active");

                if (item.classList.contains("active")) {
                content.style.height = `${content.scrollHeight}px`;
                } else {
                content.style.height = 0;
                }
            });
            });
        });        
    </script>

    <script>
        gsap.fromTo("#main-nav", 
        { y: -96 }, // Starting value
        { 
            y: 0, // Ending value
            scrollTrigger: {
            trigger: "#invisibleScrollerTarget",
            start: "top -96", // Adjust based on when you want the animation to start
            toggleActions: "play none none reverse", // Play animation on enter, reverse on leave
            paused: true, // Pauses the animation until the scroll happens
            },
            duration: 0.75,
            ease: "power2.inOut",
        }
        );
    </script>
{{partial:globals/smoothWrapEnd}}