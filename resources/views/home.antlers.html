{{partial:globals/smoothWrapStart}}
<div id="invisibleScrollerTarget"></div>

<section id="hero" class="min-h-screen pt-24 pb-12 relative flex flex-col justify-center">
    <div class="background absolute top-0 left-0 w-2/3 h-full bg-softblack z-0"></div>
    <div class="px-16 mx-auto h-full grid grid-cols-2 relative z-30">
        <div class="flex flex-col justify-center h-full pr-16 space-y-8">
            <div>
                <h1 id="counting" class="text-white">2024 and counting...</h1>
                <h1 id="itstime" class="text-white">Time to rescue our humanity.</h1>
            </div>
            <div class="prose prose-sky prose-invert xl:prose-xl leading-snug xl:leading-snug">
                {{welcome_message}}
            </div>
            <button id="heroButton" class="btn-primary">{{lead_button_text}}</button>
            </div>
        <div data-speed=".6" style="background-image: url('{{hero_images | random}}');" class="h-full w-full bg-center bg-contain bg-no-repeat"></div>
    </div>
</section>

<section id="secondary" class="grid grid-cols-2 gap-16 h-[calc(100vh-96px)]">
    <div class="flex flex-col justify-center h-full">
        <div class="bg-blueblast prose prose-sky xl:prose-xl leading-snug xl:leading-snug lg:p-16">
            {{intro_to_sites_content:summary}}
        </div>
        <div style="background-image: url({{intro_to_sites_content_image}});" class="bg-center bg-cover bg-repeat-no-repeat bg-red-300 h-full"></div>
        </div>
    <div class="h-full w-full flex flex-col justify-center lg:pr-16">
        <div class="accordion container mx-auto relative z-40">
            <style>
                .accordion-item.active .accordion-icon {
                transform: rotate(90deg);
                }
            </style>
            {{intro_to_sites_content:accordion}}
            <div class="accordion-item py-4 border-b border-textBlue">
                <div class="accordion-header cursor-pointer flex items-center justify-between xl:py-2 font-inter font-medium duration-200 ease-out">
                    <h2>{{item_title}}</h2>
                    <span class="accordion-icon inline-block rotate-0 duration-200 ease-out"><i class="fa-solid fa-chevron-down accordion-icon"></i></span>
                </div>
                <div style="height: 0;" class="accordion-content overflow-hidden duration-200 ease-out">
                    <div class="prose prose-sky xl:prose-lg leading-snug py-6">
                        <div class="mb-4">{{item_content}}</div>
                        <a href="{{url}}"><button class="btn-tirtiary">Explore</button></a>
                    </div>
                </div>
            </div>
            {{/intro_to_sites_content:accordion}}
        </div>
    </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
document.getElementById("heroButton").onclick = () => {
    gsap.to(window, { duration: 2, scrollTo: { y: "#challengesIntro", offsetY:24 } });
};
});
</script>

<section id="featuredCommencementSpeeches">
    <div data-speed="1.2" class="pt-16 pb-24 mb-20 space-y-8 flex flex-col  mt-0">
        <div class="swiper featuredCommencementSpeeches container">
                <div class="flex flex-row items-center justify-between w-full mb-8">
                    <h2>{{featured_content_heading}}</h2>
                    <div class="flex flex-row justify-end space-x-2 relative -left-1 mt-[40px] mb-8 mr-8 swiper-pagination">
                        <div class="image-swiper-button-prev"></div>
                        <div class="image-swiper-button-next"></div>
                    </div>
                </div>
    
            <div class="swiper-wrapper">
                {{featured_content | shuffle}}
                    <div class="swiper-slide" style="height: auto !important;">
                        {{partial:cards/card headingColor=""}}
                    </div>
                {{/featured_content}}
            </div>
        </div>
    </div>
</section>

<section class="relative">
    <div class="background absolute top-0 right-0 w-2/3 h-full bg-softblack z-0"></div>
    <div class="container mx-auto h-screen grid grid-cols-2 relative z-30">
        <div data-speed=".8" style="background-image: url('{{closing_photo}}');" class="h-full w-full bg-center bg-contain bg-no-repeat relative z-30"></div>
        <div class="flex flex-col justify-center h-full pl-8 xl:pl-16 space-y-12">
            <div class="prose prose-sky prose-invert xl:prose-xl leading-snug xl:leading-snug">
                {{closing_text}}
            </div>
          </div>
    </div>
</section>

<section id="challengesIntro" class="h-full w-full pt-32 space-y-16">
    <div class="textMeta mx-auto">Our priorities</div>
    <div class="flex flex-col h-full">
        <!-- Tabs -->
        <ul id="tabs" class="flex flex-row justify-between py-8 px-1 w-full px-32 text-white bg-wetconcrete z-30">
            <li class=""><a id="default-tab" href="#first" class="flex flex-col items-center active-tab">
                <h3 class="z-20">Ending War</h3>
                <div id="divetElement1" class="divetElement w-12 h-12 bg-wetconcrete z-10 -mb-14 rotate-45"></div>
            </a></li>
            <li class=""><a href="#second" class="flex flex-col items-center">
                <h3 class="z-20">Solving Climate</h3>
                <div id="divetElement2" class="divetElement w-12 h-12 bg-wetconcrete z-10 -mb-14 rotate-45 hidden"></div>
            </a></li>
            <li class=""><a href="#third" class="flex flex-col items-center">
                <h3 class="z-20">Preserving Democracy</h3>
                <div id="divetElement3" class="divetElement w-12 h-12 bg-wetconcrete z-10 -mb-14 rotate-45 hidden"></div>
            </a></li>
        </ul>

        <!-- Tab Contents -->
        <div id="tab-contents" class="h-full">
            <div id="first" class="h-full flex flex-col items-center">
                {{taxonomy:challenges slug:contains="war"}}
                <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
                </div>
                {{partial:themeIntroBlock challengeslugpassed="war"}}
                {{/taxonomy:challenges}}
            </div>
            <div id="second" class="hidden h-full flex flex-col items-center">
                {{taxonomy:challenges slug:contains="climate"}}
                <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
                    <div><a href="{{url}}"><button class="mb-12 btn-primary btn-inverse">Explore</button></a></div>
                </div>
                {{partial:themeIntroBlock challengeslugpassed="climate"}}
                {{/taxonomy:challenges}}
            </div>
            <div id="third" class="hidden h-full flex flex-col items-center">
                {{taxonomy:challenges slug:contains="democracy"}}
                <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
                    <div><a href="{{url}}"><button class="mb-12 btn-primary btn-inverse">Explore</button></a></div>
                </div>
                {{partial:themeIntroBlock challengeslugpassed="democracy"}}
                {{/taxonomy:challenges}}
            </div>
        </div>
    </div>
    <style>
        .active-tab {
            color: #fa0505;
            padding-bottom: 4px;
            z-index: 20;
        }
        #tabs a {
            text-decoration: none;
        }
        #tabs a:hover {
            text-decoration: none;
        }
    </style>
    <script>
    let tabsContainer = document.querySelector("#tabs");
    let tabTogglers = tabsContainer.querySelectorAll("#tabs a");
    let divetElements = document.querySelectorAll(".divetElement");

    tabTogglers.forEach(function(toggler, index) {
        toggler.addEventListener("click", function(e) {
            e.preventDefault();

            let tabName = this.getAttribute("href");
            let tabContents = document.querySelector("#tab-contents");

            for (let i = 0; i < tabContents.children.length; i++) {
                tabTogglers[i].classList.remove("active-tab");
                tabContents.children[i].classList.remove("hidden");
                divetElements[i].classList.add("hidden");

                if ("#" + tabContents.children[i].id === tabName) {
                    continue;
                }
                tabContents.children[i].classList.add("hidden");
            }

            e.target.parentElement.classList.add("active-tab");
            divetElements[index].classList.remove("hidden");
        });
    });
    </script>
</section>



<!-- <section class="py-48 space-y-8 relative z-10">
    <div data-speed=".9" class="font-thin text-7xl xl:text-8xl text-center leading-tight xl:px-36">
        "Don't look for hope.<br>Look for <span class="font-bold">action</span>."
    </div>
    <div data-speed=".9" class="textMeta mx-auto">
        &mdash; Greta Thunberg
    </div>
</section> -->

    <script src="/js/heroGSAP.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const accordionItems = document.querySelectorAll(".accordion-item");

            accordionItems.forEach((item) => {
            const header = item.querySelector(".accordion-header");
            const content = item.querySelector(".accordion-content");

            header.addEventListener("click", () => {

                // close other items
                accordionItems.forEach((otherItem) => {
                if (otherItem !== item && otherItem.classList.contains("active")) {
                    otherItem.classList.remove("active");
                    otherItem.querySelector(".accordion-content").style.height = 0;
                }
                });

                item.classList.toggle("active");

                if (item.classList.contains("active")) {
                content.style.height = `${content.scrollHeight}px`;
                } else {
                content.style.height = 0;
                }
            });
            });
        });        
    </script>

    <script>
        gsap.fromTo("#main-nav", 
        { y: -96 }, // Starting value
        { 
            y: 0, // Ending value
            scrollTrigger: {
            trigger: "#invisibleScrollerTarget",
            start: "top -96", // Adjust based on when you want the animation to start
            toggleActions: "play none none reverse", // Play animation on enter, reverse on leave
            paused: true, // Pauses the animation until the scroll happens
            },
            duration: 0.75,
            ease: "power2.inOut",
        }
        );
    </script>
{{partial:globals/smoothWrapEnd}}