{{partial:globals/smoothWrapStart}}
<div id="invisibleScrollerTarget"></div>

<section data-speed=".9" id="hero" class="min-h-screen pt-24 pb-12 relative flex flex-col justify-center">
    <div class="background absolute top-0 left-0 w-full h-full bg-softblack z-0"></div>
    <video id="clouds" autoplay muted loop class="absolute top-0 left-0 z-0 w-full h-full object-cover opacity-80">
        <source src="/assets/clouds3.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <div id="itstime" class="flex flex-col justify-center h-full w-full pt-[10vh] items-center text-center relative z-30 pr-16 space-y-8">
        <div>
            <h1 id="counting" class="text-white">2024 and counting...</h1>
            <h1 class="text-white">Time to rescue our humanity.</h1>
        </div>
        <h2 class="w-2/3 text-white leading-normal">
            {{welcome_message}}
        </h2>
        <button id="heroButton" class="btn-primary">{{lead_button_text}}</button>
        </div>
    <!-- <div data-speed=".6" style="background-image: url('{{hero_images | random}}');" class="h-full w-full bg-center bg-contain bg-no-repeat"></div> -->
</section>

<section id="secondary" class="grid grid-cols-2 gap-16 h-[calc(100vh-96px)] relative z-10">
    <div class="flex flex-col justify-center h-full">
        <div class="bg-blueblast prose prose-sky xl:prose-xl leading-snug xl:leading-snug lg:p-16">
            {{intro_to_sites_content:summary}}
        </div>
        <div style="background-image: url({{intro_to_sites_content_image}});" class="bg-center bg-cover bg-repeat-no-repeat bg-red-300 h-full"></div>
        </div>
    <div data-speed="1.2" class="h-full w-full flex flex-col justify-center lg:pr-16">
        <div class="accordion container mx-auto relative z-40">
            <style>
                .accordion-item.active .accordion-icon {
                transform: rotate(90deg);
                }
            </style>
            {{intro_to_sites_content:accordion}}
            <div class="accordion-item py-4 border-b border-textBlue">
                <div class="accordion-header cursor-pointer flex items-center justify-between xl:py-2 font-inter font-medium duration-200 ease-out">
                    <h3>{{item_title}}</h3>
                    <span class="accordion-icon inline-block rotate-0 duration-200 ease-out"><i class="fa-solid fa-chevron-down accordion-icon"></i></span>
                </div>
                <div style="height: 0;" class="accordion-content overflow-hidden duration-200 ease-out">
                    <div class="prose prose-sky leading-snug py-2">
                        <div class="mb-4">{{item_content}}</div>
                        <a href="{{url}}"><button class="btn-tirtiary">Explore</button></a>
                    </div>
                </div>
            </div>
            {{/intro_to_sites_content:accordion}}
        </div>
    </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", () => {
document.getElementById("heroButton").onclick = () => {
    gsap.to(window, { duration: 2, scrollTo: { y: "#challengesIntro", offsetY:24 } });
};
});
</script>

<section id="featuredCommencementSpeeches">
    <div data-speed="1.2" class="pt-16 pb-24 mb-20 space-y-8 flex flex-col  mt-0">
        <div class="swiper featuredCommencementSpeeches container">
                <div class="flex flex-row items-center justify-between w-full mb-8">
                    <h2>{{featured_content_heading}}</h2>
                    <div class="flex flex-row justify-end space-x-2 relative -left-1 mt-[40px] mb-8 mr-8 swiper-pagination">
                        <div class="image-swiper-button-prev"></div>
                        <div class="image-swiper-button-next"></div>
                    </div>
                </div>
    
            <div class="swiper-wrapper">
                {{featured_content | shuffle}}
                    <div class="swiper-slide" style="height: auto !important;">
                        {{partial:cards/card headingColor=""}}
                    </div>
                {{/featured_content}}
            </div>
        </div>
    </div>
</section>

<section class="relative">
    <div class="background absolute top-0 right-0 w-2/3 h-full bg-softblack z-0"></div>
    <div class="container mx-auto h-screen grid grid-cols-2 relative z-30">
        <div data-speed=".8" style="background-image: url('{{closing_photo}}');" class="h-full w-full bg-center bg-contain bg-no-repeat relative z-30"></div>
        <div class="flex flex-col justify-center h-full pl-8 xl:pl-16 space-y-12">
            <div class="prose prose-sky prose-invert xl:prose-xl leading-snug xl:leading-snug">
                {{closing_text}}
            </div>
          </div>
    </div>
</section>

<section id="challengesIntro" class="h-full w-full pt-32 space-y-16">
    <div class="textMeta mx-auto">Our priorities</div>
    <div id="accordionFlushExample">
        {{taxonomy:challenges}}
            <div class="rounded-none border border-e-0 border-s-0 border-t-0 border-neutral-200 bg-none dark:border-neutral-600 dark:bg-body-dark">
                <h2 class="mb-0" id="flush-headingOne">
                    <button
                    class="group relative flex w-full items-center rounded-none border-0 bg-none px-5 py-4 text-left text-7xl text-neutral-800 transition [overflow-anchor:none] hover:z-[2] focus:z-[3] focus:outline-none dark:bg-body-dark dark:text-white [&:not([data-twe-collapse-collapsed])]:bg-none [&:not([data-twe-collapse-collapsed])]:text-primary [&:not([data-twe-collapse-collapsed])]:shadow-border-b dark:[&:not([data-twe-collapse-collapsed])]:bg-surface-dark dark:[&:not([data-twe-collapse-collapsed])]:text-primary dark:[&:not([data-twe-collapse-collapsed])]:shadow-white/10 "
                    type="button"
                    data-twe-collapse-init
                    data-twe-collapse-collapsed
                    data-twe-target="#flush-collapseOne"
                    aria-expanded="false"
                    aria-controls="flush-collapseOne">
                    {{title}}
                    <span
                        class="-me-1 ms-auto h-5 w-5 shrink-0 rotate-[-180deg] transition-transform duration-200 ease-in-out group-data-[twe-collapse-collapsed]:me-0 group-data-[twe-collapse-collapsed]:rotate-0 motion-reduce:transition-none [&>svg]:h-6 [&>svg]:w-6">
                        <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                        </svg>
                    </span>
                    </button>
                </h2>
                <div
                    id="flush-collapseOne"
                    class="!visible hidden border-0"
                    data-twe-collapse-item
                    data-twe-collapse-collapsed
                    aria-labelledby="flush-headingOne"
                    data-twe-parent="#accordionFlushExample">
                    <div class="px-5 py-4">
                    Placeholder content for this accordion, which is intended to
                    demonstrate the
                    <code>.accordion-flush</code> class. This is the first item's
                    accordion body.
                    </div>
                </div>
            </div>
        {{/taxonomy:challenges}}
      </div>
    <div class="flex flex-col h-full">        
        {{taxonomy:challenges slug:contains="war"}}
        <div style="background-image: url({{main_image:image}});" class="h-[70vh] flex flex-col justify-end bg-no-repeat bg-cover bg-left w-2/3">
        </div>
        <div data-speed="1.2" class="col-span-12 lg:col-span-6 lg:row-start-2 lg:col-start-6 mb-24 z-10">
            {{featured_content limit="3"}}
                {{partial:cards/featuredCard}}
            {{/featured_content}}                    
        </div>`
        {{/taxonomy:challenges}}
    
        {{taxonomy:challenges slug:contains="climate"}}
        <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
        </div>
        <div data-speed="1.2" class="col-span-12 lg:col-span-6 lg:row-start-2 lg:col-start-6 mb-24 z-10">
            {{featured_content limit="3"}}
                {{partial:cards/featuredCard}}
            {{/featured_content}}                    
        </div>
        {{/taxonomy:challenges}}
    
        {{taxonomy:challenges slug:contains="democracy"}}
        <div style="background-image: url({{main_image:image}});" class="h-[100vh] flex flex-col justify-end items-center bg-no-repeat bg-cover bg-center w-full">
        </div>
        <div data-speed="1.2" class="col-span-12 lg:col-span-6 lg:row-start-2 lg:col-start-6 mb-24 z-10">
            {{featured_content limit="3"}}
                {{partial:cards/featuredCard}}
            {{/featured_content}}                    
        </div>
        {{/taxonomy:challenges}}
    </div>
    
</section>



<!-- <section class="py-48 space-y-8 relative z-10">
    <div data-speed=".9" class="font-thin text-7xl xl:text-8xl text-center leading-tight xl:px-36">
        "Don't look for hope.<br>Look for <span class="font-bold">action</span>."
    </div>
    <div data-speed=".9" class="textMeta mx-auto">
        &mdash; Greta Thunberg
    </div>
</section> -->

    <script src="/js/heroGSAP.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const accordionItems = document.querySelectorAll(".accordion-item");

            accordionItems.forEach((item) => {
            const header = item.querySelector(".accordion-header");
            const content = item.querySelector(".accordion-content");

            header.addEventListener("click", () => {

                // close other items
                accordionItems.forEach((otherItem) => {
                if (otherItem !== item && otherItem.classList.contains("active")) {
                    otherItem.classList.remove("active");
                    otherItem.querySelector(".accordion-content").style.height = 0;
                }
                });

                item.classList.toggle("active");

                if (item.classList.contains("active")) {
                content.style.height = `${content.scrollHeight}px`;
                } else {
                content.style.height = 0;
                }
            });
            });
        });        
    </script>

    <script>
        gsap.fromTo("#main-nav", 
        { y: -96 }, // Starting value
        { 
            y: 0, // Ending value
            scrollTrigger: {
            trigger: "#invisibleScrollerTarget",
            start: "top -96", // Adjust based on when you want the animation to start
            toggleActions: "play none none reverse", // Play animation on enter, reverse on leave
            paused: true, // Pauses the animation until the scroll happens
            },
            duration: 0.75,
            ease: "power2.inOut",
        }
        );
    </script>
{{partial:globals/smoothWrapEnd}}