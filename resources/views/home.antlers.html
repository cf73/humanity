{{partial:globals/smoothWrapStart}}


<section data-speed="0.5" id="hero" class="min-h-screen pt-24 relative flex flex-col justify-center">
    <!-- <div class="background absolute top-0 left-0 w-full h-full bg-lightSkyBlue z-0"></div> -->
    
    <div class="px-16 flex flex-col h-full w-full pt-[10vh] relative z-30 pr-16">
        <div class="text-center text-6xl font-regular uppercase leading-none tracking-tight text-white">
            <div id="counting">2025 and counting...</div>
            <div>Time to rescue our humanity.</div>
        </div>
        <div class="textMain leading-snug text-center text-white mx-auto">
        </div>
        <!-- <button id="heroButton" class="btn-primary">{{lead_button_text}}</button> -->
    </div>
    <!-- <div data-speed=".6" style="background-image: url('{{hero_images | random}}');" class="h-full w-full bg-center bg-contain bg-no-repeat"></div> -->
</section>

<div id="challengeContent" class=" mx-auto grid grid-cols-12 gap-[24px] mt-16 mb-32 px-[30px] relative">
    <!-- <style>
        /* Hide inactive checkboxes */
        input[type="checkbox"]:not(:checked) {
            display: none;
        }
    </style> -->
    <div id="filters" class="col-span-4 xl:col-span-3 mt-[400px] pr-[24px] border-r border-lightpurple/70">
        <form action="/results" method="get">
            <h5 class="pb-[6px] text-lightpurple border-b border-lightpurple/70 mb-[6px]">Format</h5>
            {{taxonomy:collection_type}}
                <label class="font-ApercuMono leading-normal        antialiased">
                    <input class="rounded"
                        type="checkbox"
                        name="collectiontype[]"
                        value="{{ slug }}"
                        {{ (get:collectiontype | contains(slug)) ?= 'checked' }}>
                    {{ title }}<br>
                </label>
            {{/taxonomy:collection_type}}
            
            <h5 class="mt-[18px] pb-[6px] text-lightpurple border-b border-lightpurple/70 mb-[6px]">Our Priorities</h5>
            {{taxonomy:challenges :categories:contains="{{(get:categories | contains(slug))}}"}}
                <label class="font-ApercuMono leading-normal        antialiased">
                    <input class="rounded"
                        type="checkbox"
                        name="categories[]"
                        value="{{ slug }}"
                        {{ (get:categories | contains(slug)) ?= 'checked' }}>
                    {{ title }}<br>
                </label>
            {{/taxonomy:challenges}}

            <h5 class="mt-[18px] pb-[6px] text-lightpurple border-b border-lightpurple/70 mb-[6px]">Collections</h5>
            {{taxonomy:section :categories:contains="{{(get:categories | contains(slug))}}"}}
                <label class="font-ApercuMono leading-normal        antialiased">
                    <input class="rounded"
                        type="checkbox"
                        name="categories[]"
                        value="{{ slug }}"
                        {{ (get:categories | contains(slug)) ?= 'checked' }}>
                    {{ title }}<br>
                </label>
            {{/taxonomy:section}}
            
            <button type="submit" class="btn-primary mt-4">Apply</button>
        </form>
    </div>
    <div class="col-start-5 xl:col-start-4 col-span-8 xl:col-span-9">
        <div class="border-b space-y-[12px] border-lightpurple/70 pb-[12px] mb-[12px]">
            <div class="font-ApercuBoldItalic text-[300px] xl:text-[387px] tracking-tighter leading-[220px] xl:leading-[280px]">2025</div>
            <h1>and counting...</h1>
            <h2>Itâ€™s time to save our humanity.</h2>
            {{welcome_message}}
        </div>

        {{ collection from="*" not_from="pages" as="results"
        :taxonomy:challenges:all="get:categories"
        :taxonomy:collection_type="get:collectiontype"
         }}
            {{ if no_results }}
                <div class="p-8 rounded-lg bg-gray-100 text-center">
                    Sorry, no results.
                </div>
            {{ else }}
                <div class="columns-3 xl:columns-3 gap-[6px]">
                    {{ results | shuffle }}
                        {{ partial:cards/card }}
                    {{ /results }}
                </div>
            {{ /if }}
        {{ /collection }}
    </div>
</div>

    {{ collection:quotations sort="random" limit="1" }}
        <div data-speed="1.4" class="col-span-2 px-16 -mt-48 z-20 flex flex-col items-center text-center">
            <div class="text-5xl text-white leading-snug mb-4">{{quotation}}</div>
            <div class="textMeta text-white w-2/3">{{attribution}}</div>
        </div>
    {{/collection:quotations}}
</section>


<img src="{{closing_photo}}" width="66%" class="mx-auto" alt="{{closing_photo:title}}">

<section data-speed="0.8" class="py-60">
    <div class="textMain text-center text-white/70 mx-auto leading-snug">
        {{closing_text}}
    </div>
</section>

<!-- <section class="py-48 space-y-8 relative z-10">
    <div data-speed=".9" class="font-thin text-7xl xl:text-8xl text-center leading-tight xl:px-36">
        "Don't look for hope.<br>Look for <span class="font-bold">action</span>."
    </div>
    <div data-speed=".9" class="textMeta mx-auto">
        &mdash; Greta Thunberg
    </div>
</section> -->

    <script src="/js/heroGSAP.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const accordionItems = document.querySelectorAll(".accordion-item");

            accordionItems.forEach((item) => {
            const header = item.querySelector(".accordion-header");
            const content = item.querySelector(".accordion-content");

            header.addEventListener("click", () => {

                // close other items
                accordionItems.forEach((otherItem) => {
                if (otherItem !== item && otherItem.classList.contains("active")) {
                    otherItem.classList.remove("active");
                    otherItem.querySelector(".accordion-content").style.height = 0;
                }
                });

                item.classList.toggle("active");

                if (item.classList.contains("active")) {
                content.style.height = `${content.scrollHeight}px`;
                } else {
                content.style.height = 0;
                }
            });
            });
        });        
    </script>

    <script>
        gsap.fromTo("#main-nav", 
        { y: -96 }, // Starting value
        { 
            y: 0, // Ending value
            scrollTrigger: {
            trigger: "#invisibleScrollerTarget",
            start: "top -96", // Adjust based on when you want the animation to start
            toggleActions: "play none none reverse", // Play animation on enter, reverse on leave
            paused: true, // Pauses the animation until the scroll happens
            },
            duration: 0.75,
            ease: "power2.inOut",
        }
        );
    </script>
{{partial:globals/smoothWrapEnd}}